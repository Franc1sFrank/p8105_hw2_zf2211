p8105\_hw2\_zf2211
================
Francis
9/30/2018

``` r
library(tidyverse)
```

    ## ── Attaching packages ──────────────────────────────────────────────────────────────────────── tidyverse 1.2.1 ──

    ## ✔ ggplot2 3.0.0     ✔ purrr   0.2.5
    ## ✔ tibble  1.4.2     ✔ dplyr   0.7.6
    ## ✔ tidyr   0.8.1     ✔ stringr 1.3.1
    ## ✔ readr   1.1.1     ✔ forcats 0.3.0

    ## ── Conflicts ─────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(tidyr)
```

Problem1
--------

``` r
Transit_Data = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada)
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
select(Transit_Data, entry) %>% 
mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
```

    ## # A tibble: 1,868 x 1
    ##    entry
    ##    <lgl>
    ##  1 TRUE 
    ##  2 TRUE 
    ##  3 TRUE 
    ##  4 TRUE 
    ##  5 TRUE 
    ##  6 TRUE 
    ##  7 TRUE 
    ##  8 TRUE 
    ##  9 TRUE 
    ## 10 TRUE 
    ## # ... with 1,858 more rows

This dataset contains variables like:

``` r
names(Transit_Data)
```

    ##  [1] "line"              "station_name"      "station_latitude" 
    ##  [4] "station_longitude" "route1"            "route2"           
    ##  [7] "route3"            "route4"            "route5"           
    ## [10] "route6"            "route7"            "route8"           
    ## [13] "route9"            "route10"           "route11"          
    ## [16] "entry"             "vending"           "entrance_type"    
    ## [19] "ada"

I used **janitor::clean\_names** to clean the names of data, then **select** several variables from the data, at last converted the entry into logical variables.

The number of rows and columns of the resulting dataset is

``` r
nrow(Transit_Data)
```

    ## [1] 1868

``` r
ncol(Transit_Data)
```

    ## [1] 19

No, it is not yet tidy because route1 to route11 is separated. It will be better to sort out together.

1)There are

``` r
count(distinct(Transit_Data, station_name, line))
```

    ## # A tibble: 1 x 1
    ##       n
    ##   <int>
    ## 1   465

stations.

2)There are

``` r
count(distinct(filter(Transit_Data, ada == TRUE), station_name))
```

    ## # A tibble: 1 x 1
    ##       n
    ##   <int>
    ## 1    73

stations are ADA compliant.

3)The proportion of station entrance/exits without vending allow entrance is

``` r
count(distinct(Transit_Data, entrances, vending = FALSE, entry = TRUE)) /
  count(distinct(Transit_Data, entrances))
```

    ## Warning: Trying to compute distinct() for variables not found in the data:
    ## - `entrances`
    ## This is an error, but only a warning is raised for compatibility reasons.
    ## The following variables will be used:
    ## - vending
    ## - entry

    ## Warning: Trying to compute distinct() for variables not found in the data:
    ## - `entrances`
    ## This is an error, but only a warning is raised for compatibility reasons.
    ## The operation will return the input unchanged.

    ##              n
    ## 1 0.0005353319

4)There are

``` r
count(distinct(filter(Transit_Data, route1 == "A")))
```

    ## # A tibble: 1 x 1
    ##       n
    ##   <int>
    ## 1    91

distict stations serve A train.

5)Of the stations that serve the A train, there are

``` r
count(distinct(filter(Transit_Data, route1 == "A", ada == TRUE)))
```

    ## # A tibble: 1 x 1
    ##       n
    ##   <int>
    ## 1    34

distinct stations are ADA compliant.

Problem2
--------

``` r
library(readxl)
library(tidyverse)
```

``` r
MrTrash_Wheel = 
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = 1, range = "A2:N338") %>% 
  janitor::clean_names() %>% 
  filter(!is.na("weight")) %>% 
  mutate(as.integer(round(sports_balls)))
```

``` r
prcp2016 = 
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = 5, range = "A2:B14") %>% 
  janitor::clean_names() %>%
  filter(!is.na("Total")) %>% 
  mutate(year = 2016)
```

``` r
prcp2017 = 
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = 4, range = "A2:B14") %>% 
  janitor::clean_names() %>%
  filter(!is.na("Total")) %>% 
  mutate(year = 2017)
```

Combine datasets

``` r
prcp = 
  bind_rows(prcp2016, prcp2017) %>%
   mutate(month = month.name[month]) %>% 
    select(year, month, total)
```

The MrTrash\_Wheel dataset contains 336 rows and 15 columns, and the prcp dataset contains 24 rows and 3 columns. We focus on the weight, volumn and different items; total precipitation of each month. The total precipitation in 2017 was 32.93, and the median number of sports balls in a dumpster in 2016 was \`r median(MrTrash\_Wheel, "Sports\_Balls")

``` r
brfss = 
  read.csv(url("https://github.com/P8105/p8105.datasets")) %>% 
  janitor::clean_names()
```
